<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aegis Asset Onboarding // CH. 2: THE ASSET'S LEDGER</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Exo+2:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Exo 2', sans-serif;
            background-color: #0a0a0a;
        }
        .font-mono {
            font-family: 'Roboto Mono', monospace;
        }
        .glass-effect {
            background: rgba(17, 24, 39, 0.85);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(129, 140, 248, 0.2);
            display: flex;
            flex-direction: column;
            height: 90vh;
            max-height: 850px;
        }
        .progress-bar-inner {
            transition: width 0.5s ease-in-out;
        }
        .dialogue-btn {
            font-weight: 700;
            padding: 0.75rem 1rem;
            border-radius: 0.375rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            font-size: 0.875rem;
            line-height: 1.25rem;
            border-width: 2px;
            text-align: center;
        }
        .btn-paragon {
            background-color: rgba(37, 99, 235, 0.2);
            border-color: #60a5fa;
            color: #93c5fd;
        }
        .btn-paragon:hover {
            background-color: rgba(59, 130, 246, 0.4);
            color: #ffffff;
        }
        .btn-renegade {
            background-color: rgba(220, 38, 38, 0.2);
            border-color: #f87171;
            color: #fca5a5;
        }
        .btn-renegade:hover {
            background-color: rgba(239, 68, 68, 0.4);
            color: #ffffff;
        }
        .btn-neutral {
            border-radius: 9999px;
            height: 3rem;
            width: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-width: 2px;
            background-color: rgba(107, 114, 128, 0.2);
            border-color: #9ca3af;
            color: #d1d5db;
            position: relative;
            flex-shrink: 0;
        }
        .btn-neutral:hover {
            background-color: rgba(156, 163, 175, 0.4);
            color: #ffffff;
        }
        .tooltip {
            visibility: hidden;
            position: absolute;
            bottom: 100%;
            margin-bottom: 0.5rem;
            width: max-content;
            max-width: 20rem; /* Increased max-width */
            padding: 0.75rem; /* Increased padding */
            font-size: 0.875rem; /* Increased font size */
            line-height: 1.25rem;
            color: #ffffff;
            background-color: #111827; /* Darker background */
            border-radius: 0.375rem;
            border: 1px solid rgba(129, 140, 248, 0.3);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 50;
            /* New properties to constrain tooltip */
            left: 50%;
            transform: translateX(-50%);
        }
        .btn-neutral:hover .tooltip, .tooltip-trigger:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
        .checklist-item {
            cursor: pointer;
            transition: transform 0.2s;
        }
        .checklist-item:hover {
            transform: scale(1.1);
        }
        .checklist-item.completed .checkbox {
             background-color: #4f46e5;
             border-color: #4f46e5;
        }
        .checklist-item.completed .checkbox::after {
            content: 'âœ“';
            color: white;
            font-weight: bold;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }
        .dialogue-box {
            background-color: rgba(23, 31, 58, 0.1);
            padding: 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid rgba(79, 70, 229, 0.3);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100%;
        }
        .dialogue-text {
            color: #d1d5db;
            font-size: 1.125rem;
            line-height: 1.75rem;
        }
        .dialogue-emphasis {
            color: #ffffff;
            font-weight: 700;
            position: relative;
            border-bottom: 2px dotted rgba(165, 180, 252, 0.5);
            cursor: help;
        }
        .parable-box {
            background-color: rgba(17, 24, 39, 0.5);
            padding: 1rem;
            border-radius: 0.5rem;
            border: 1px solid #374151;
            height: 100%;
        }
        .quote {
            font-family: 'Roboto Mono', monospace;
            font-size: 0.875rem;
            color: rgba(165, 180, 252, 0.7);
            border-left-width: 2px;
            border-color: rgba(99, 102, 241, 0.5);
            padding-left: 1rem;
            margin-top: 1.5rem;
            font-style: italic;
        }
    </style>
</head>
<body class="text-gray-200 bg-cover bg-center bg-fixed" style="background-image: url('https://placehold.co/1920x1080/0a0a1a/1a1a2e?text=SYNAPSE+SYSTEMS&font=exo2');">

    <div class="min-h-screen flex items-center justify-center p-2 sm:p-4">
        <div class="w-full max-w-4xl glass-effect rounded-xl shadow-2xl overflow-hidden">
            
            <header class="bg-gray-900/50 p-4 sm:p-6 border-b border-indigo-500/30 flex-shrink-0">
                <h1 class="text-xl sm:text-3xl font-black text-white tracking-widest uppercase">Aegis Asset Onboarding</h1>
                <p class="text-indigo-400 font-mono text-xs sm:text-sm">MODULE 2: THE ASSET'S LEDGER</p>
            </header>

            <main class="p-4 sm:p-8 flex-grow overflow-y-auto">
                <div id="section-display" class="h-full"></div>
            </main>
            
            <div id="dialogue-hub" class="p-4 sm:p-6 border-t border-indigo-700/30 bg-gray-900/30 flex-shrink-0">
            </div>

            <footer class="bg-gray-900/50 p-4 border-t border-indigo-500/30 flex-shrink-0">
                <div class="flex justify-between items-center gap-4">
                    <div class="w-1/3">
                        <div id="checklist" class="flex gap-2">
                             <div id="check-0" class="checklist-item w-1/4 h-4"><div class="checkbox w-full h-full rounded-sm border-2 border-gray-600 relative"></div></div>
                             <div id="check-1" class="checklist-item w-1/4 h-4"><div class="checkbox w-full h-full rounded-sm border-2 border-gray-600 relative"></div></div>
                             <div id="check-2" class="checklist-item w-1/4 h-4"><div class="checkbox w-full h-full rounded-sm border-2 border-gray-600 relative"></div></div>
                             <div id="check-3" class="checklist-item w-1/4 h-4"><div class="checkbox w-full h-full rounded-sm border-2 border-gray-600 relative"></div></div>
                        </div>
                    </div>
                    <div class="w-1/3 text-center">
                        <p id="progress-text" class="text-sm font-mono text-indigo-400">0% COMPLETE</p>
                    </div>
                    <div class="w-1/3">
                         <div class="w-full bg-gray-700 rounded-full h-2.5">
                            <div id="progress-bar" class="bg-indigo-600 h-2.5 rounded-full progress-bar-inner" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <script>
        let currentSection = 0;
        let highestSectionReached = 0;
        const totalLearningSections = 4;

        const sections = [
            {
                heading: "Transmission from Handler Lyra-7",
                quote: `The world is a dangerous place, not because of those who do evil, but because of those who look on and do nothing.`,
                quote_source: "Attributed to Albert Einstein",
                dialogue: [
                    "Asset, you understand the Permanent Record. Now we address its major flaw for our line of work: it's public.",
                    "This module covers why we need more than a public ledger. We need shadows to move in. We need an asset's ledger."
                ],
                options: [
                    { text: "Acknowledged. Let's begin.", action: () => nextSection(), type: 'paragon' }
                ]
            },
            {
                heading: "// 1. The Two Assets: A Parable",
                quote: "A secret is a weapon and a friend. This is what I was taught.",
                quote_source: "Natasha Romanoff",
                dialogue: [
                    "To understand privacy, let's look at two assets operating in hostile territory.",
                    `<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                        <div class="parable-box">
                            <h4 class="font-bold text-lg text-red-400 mb-2">The Exposed Asset</h4>
                            <p class="text-sm text-gray-400">Asset C7-NT uses a public system, like Bitcoin. Every transaction is a signed receipt on a public bulletin board. A determined analyst at Ouroboros can connect these dots. They follow the money. They find the network. They compromise the mission.</p>
                        </div>
                         <div class="parable-box border-cyan-700">
                            <h4 class="font-bold text-lg text-cyan-400 mb-2">The Ghost Asset</h4>
                            <p class="text-sm text-gray-400">Asset BE-2B uses a private system, like Monero. Transactions are like <span class="dialogue-emphasis tooltip-trigger">dead drops<span class="tooltip">A method of secure communication where items are left in a secret location to be retrieved later by another party, breaking the chain of contact.</span></span>. An observer sees movement, but the links are broken. They don't know who left the package, or who picked it up. The asset moves like a ghost.</p>
                        </div>
                    </div>`
                ],
                options: [
                    { text: "Review mission parameters.", action: () => previousSection(), type: 'renegade' },
                    { text: "Acknowledged. A public trail is a vulnerability.", action: () => nextSection(), type: 'paragon' }
                ]
            },
            {
                heading: "// 2. Monero: The Ghost Protocol",
                quote: "The best way to keep a secret is to pretend there isn't one.",
                quote_source: "Tom Clancy",
                dialogue: [
                    "The Ghost Asset's method is our method. Monero is designed for privacy from the ground up.",
                    "It uses advanced cryptography to create a <span class='dialogue-emphasis tooltip-trigger'>digital black box<span class='tooltip'>A system whose inner workings are hidden. You can see the input and output, but not the process in between, ensuring privacy.</span></span> for every transaction. It scrambles the data of the sender, the receiver, and the amount. It breaks the chain of evidence, making our financial movements untraceable."
                ],
                options: [
                     { text: "Explain the two assets again.", action: () => previousSection(), type: 'renegade' },
                     { text: "Acknowledged. Untraceable transactions are key.", action: () => nextSection(), type: 'paragon' },
                ]
            },
            {
                heading: "// 3. Operational Security (OPSEC)",
                quote: "The mission comes first.",
                quote_source: "Jason Bourne",
                dialogue: [
                    "So why is the Ghost Protocol critical for Aegis?",
                    "Because it protects everyone. It protects our supporters fueling the starships. It protects our operators in the field. And it protects the mission itself from being shut down by hostile forces.",
                    "Our privacy is not about hiding. It's about protecting our people. That is our highest law. This is the core of our operational security."
                ],
                options: [
                    { text: "What's the 'black box'?", action: () => previousSection(), type: 'renegade' },
                    { text: "Acknowledged. Privacy is protection.", action: () => nextSection(), type: 'paragon' },
                ]
            },
            {
                heading: "Module 2 Complete, Asset.",
                quote: "We are building a world where everyone has a place, a purpose, and a future.",
                quote_source: "AEGIS Network Prime Directive",
                dialogue: [
                    "You now understand not just *how* our systems work, but *why* they are built this way. Security through obscurity. Strength in shadows.",
                    "This knowledge is a weapon. Use it wisely. Good work, Spark."
                ],
                 options: [
                    { text: "Restart Module", action: () => restartTraining(), type: 'renegade' },
                    { text: "Proceed to Chapter 3", action: () => window.location.href = 'operator-onboarding-3.html', type: 'paragon' },
                ]
            }
        ];

        const geminiBaseUrl = "https://gemini.google.com/app?prompt=";

        function renderSection(sectionIndex) {
            const sectionData = sections[sectionIndex];
            const display = document.getElementById('section-display');
            const dialogueHub = document.getElementById('dialogue-hub');

            const dialogueHtml = sectionData.dialogue.map(p => `<p class="dialogue-text mb-4">${p}</p>`).join('');
            
            display.innerHTML = `
                <div class="dialogue-box">
                    <div>
                        <h3 class="text-xl font-bold ${sectionIndex === 0 ? 'text-white' : 'text-indigo-400'} mb-4 font-mono">${sectionData.heading}</h3>
                        ${dialogueHtml}
                    </div>
                    <blockquote class="quote">
                        <p>"${sectionData.quote}"</p>
                        <cite class="block text-right not-italic text-indigo-400/50">- ${sectionData.quote_source}</cite>
                    </blockquote>
                </div>
            `;
            
            const renegadeOpt = sectionData.options.find(o => o.type === 'renegade');
            const paragonOpt = sectionData.options.find(o => o.type === 'paragon');

            let hubHTML = '<div class="flex items-center justify-center gap-4">';
            
            hubHTML += '<div class="w-1/3 flex justify-start">';
            if(renegadeOpt) {
                hubHTML += `<button onclick="(${renegadeOpt.action.toString()})()" class="dialogue-btn btn-renegade">${renegadeOpt.text}</button>`;
            }
            hubHTML += '</div>';

            const query = `I am a new Aegis Asset learning about privacy in cryptocurrency for my onboarding. Can you help me understand this concept better?`;
            const encodedQuery = encodeURIComponent(query);
            hubHTML += `<div class="flex-shrink-0">
                            <a href="${geminiBaseUrl}${encodedQuery}" target="_blank" class="btn-neutral">
                                <span class="font-bold text-xl italic">i</span>
                                <div class="tooltip">Click, then copy prompt from URL to ask MI for help.</div>
                            </a>
                       </div>`;
            
            hubHTML += '<div class="w-1/3 flex justify-end">';
            if(paragonOpt) {
                hubHTML += `<button onclick="(${paragonOpt.action.toString()})()" class="dialogue-btn btn-paragon">${paragonOpt.text}</button>`;
            }
            hubHTML += '</div>';

            hubHTML += '</div>';
            dialogueHub.innerHTML = hubHTML;
        }

        function showSection(sectionIndex) {
            currentSection = sectionIndex;
            if (currentSection > highestSectionReached) {
                highestSectionReached = currentSection;
            }
            renderSection(sectionIndex);
            updateProgress();
        }

        function updateProgress() {
            const progress = (currentSection / totalLearningSections) * 100;
            const clampedProgress = Math.min(100, Math.max(0, progress));

            document.getElementById('progress-bar').style.width = `${clampedProgress}%`;
            document.getElementById('progress-text').innerText = `${Math.round(clampedProgress)}% COMPLETE`;
            
            document.querySelectorAll('.checklist-item').forEach((item, index) => {
                item.classList.remove('completed');
                if (index < currentSection) {
                    item.classList.add('completed');
                }
            });
             if (currentSection >= totalLearningSections) {
                 for(let i=0; i < totalLearningSections; i++) {
                     document.getElementById(`check-${i}`).classList.add('completed');
                 }
             }
        }

        function nextSection() {
            if (currentSection < sections.length - 1) {
                showSection(currentSection + 1);
            }
        }
        
        function previousSection() {
            if (currentSection > 0) {
                showSection(currentSection - 1);
            }
        }

        function goToSection(sectionIndex) {
            if (sectionIndex <= highestSectionReached && sectionIndex < sections.length) {
                 showSection(sectionIndex);
            }
        }

        function restartTraining() {
            highestSectionReached = 0;
            showSection(0);
        }
        
        showSection(0);
    </script>
</body>
</html>
